{% extends 'base.html' %}

{% block content %}

<div class="container">
    <div class="row">
        <div class="container" style="text-align: center;"><h1 style="font-size: 6.5em;">จัดการโครงงาน</h1></div>
        
        <div class="jumbotron col-sm-4" style="padding: 0">
            <button type="submit" data-toggle="collapse" data-target="#add_proj"\
            class="btn btn-success" style="width: 100%;height: 80px;"><h2 style="font-size: 3em">เพิ่มโครงงาน</h2></button>
        </div>
        <div class="jumbotron col-sm-4" style="padding: 0;">
            <form action="{% url 'manage_proj' %}" method="post" id="manage_proj">
                {% csrf_token %}
                <button type="submit" name="mproj" value="mproj_edit" form="manage_proj"\
                class="btn btn-warning" style="width: 100%;height: 80px;"><h2 style="font-size: 3em">แก้ไขโครงงาน</h2></button>
            </form>
        </div>
        <div class="jumbotron col-sm-4" style="padding: 0">
            <form action="{% url 'manage_proj' %}" method="post" id="manage_proj">
                {% csrf_token %}
                <button type="submit" name="mproj" value="mproj_del" form="manage_proj"\
                name="mproj_add" class="btn btn-danger" style="width: 100%;height: 80px;"><h2 style="font-size: 3em">ลบโครงงาน</h2></button>
            </form>
        </div>


        <div class="collapse col-sm-3" id="add_proj" style="padding: 0;margin-left: 3%;">
            <form action="{% url 'manage_proj' %}" method="post" id="manage_proj">
                {% csrf_token %}
                <button type="submit" name="mproj" value="mproj_add"  form="manage_proj"\
                class="btn btn-info" style="width: 100%;height: 50px;"><h2 style="font-size: 1.7em;margin: 0">เพิ่มโครงงานเดี่ยว</h2></button>      
            </form>
            <button data-toggle="modal" data-target="#add_mulproj"\
                class="btn btn-info" style="width: 100%;height: 50px;margin-top: 2%"><h2 style="font-size: 1.7em;margin: 0">นำเข้าหลายโครงงาน</h2></button>
        </div>
        <!-- Modal -->
        <div class="modal fade" id="add_mulproj" role="dialog">
            <div class="modal-dialog modal-md">
                <!-- Modal content-->
                <div class="modal-content">
                    <form action="{% url 'upload_csv' %}" method="POST" enctype="multipart/form-data" \
                    class="form-horizontal" >
                        {% csrf_token %}
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                            <h1 class="modal-title">อัพโหลดรายชื่อโปรเจค</h1>
                        </div>
                        <div class="modal-body">
                            <div class="form-group">
                                <label for="name" class="col-md-3 col-sm-3 col-xs-12 control-label">ไฟล์: </label>
                                <div class="col-md-8">
                                    <input type="file" name="csv_file" id="csv_file" required="True" class="form-control">
                                </div>                    
                            </div>
                        </div>
                        <div class="modal-footer">
                            <div class="form-group">                    
                                <button class="btn btn-primary" style="margin-right: 10%;"> 
                                    <span class="glyphicon glyphicon-upload" style="margin-right:5px;"></span>อัพโหลด </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>

    </div>
    
</div>
<div class="jumbotron" style="padding-left: 5%;padding-right: 5%;margin-top: 30px;">
    <table class="table table-hover" style="background-color:cornsilk">
        <thead>
        <tr style="background-color: slategray;color: aliceblue">
            {% for col_name in col_result%}
            <th style="text-align: center;"><h4 style="font-size: 2.2em;">{{col_name}}</h4></t>
            {% endfor %}
        </tr>
        </thead>
        <tbody>
            {% for data in list_proj%}
            <tr>
                {% for i in data%}
                <td><h4 style="font-size: 1.2em;">{{i}}</h4></td>
                {% endfor %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <!-- Modal -->
    <div class="modal fade" id="del_modal" role="dialog">
        <div class="modal-dialog modal-md">
            <div class="modal-content">
                <form action="{% url 'manage_proj' %}" method="post" id="manage_proj">
                    {% csrf_token %} 
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title" style="font-size: 3em;">ยืนยันการลบโครงงาน</h4>
                    </div>
                    <div class="modal-body">
                        <h2>ท่านแน่ใจหรือไม่ที่จะลบโครงงานดังกล่าว.</h2>
                    </div>
                    <div class="modal-footer">
                        <button id="project_del" name="project_del" value="" type="submit" class="btn btn-success" style="font-size: 1.7em;">ยืนยัน</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% block javascript %}
<script>
    $(document).on("click", ".open-Dialog", function () {
        var myId = $(this).data('id');
        $(".modal-footer #project_del").val( myId );
        // As pointed out in comments, 
        // it is superfluous to have to manually call the modal.
        // $('#addBookDialog').modal('show');
    });
</script>
{% endblock %}


{% endblock %}